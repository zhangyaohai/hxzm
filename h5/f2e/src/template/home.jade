extends layout/default.jade
include component/modal.jade

block head
  title ä¼˜æ‹œå•è½¦
  +css("/css/home.css")
  +css("/vendor/js/weui.min.css")
  +css("//at.alicdn.com/t/font_m9y874ggrr9q9f6r.css")

block body
  #app.container(v-cloak)
    .content-block
      .logo-div
        img(src="../img/logo-text.png")
      .div-circle
        a(@click="goToProfile").circle.left
          i.icon.icon-user
        a(href="contact.html").circle.right
          i.icon.icon-kefu
    .bg-div
       img(src="../img/bg.png")
    .mss
      a.mssscan(:class="{'mssactive': scanBtn}", @click="wxscan")
        img.icon(src="/img/scan.png")
        .acontent æ‰«ç å¼€é”
      a.mssmanual(:class="{'mssactive': !scanBtn}", @click="inputBtn")
        img.icon(src="/img/fill.png")
        .acontent è¾“å…¥
      .mss-tip
        div *æ³¨ï¼šç›´æ¥ç‚¹å‡» [æ‰«ç å¼€é”]æˆ–[æ‰‹åŠ¨å¼€é”]
        div è§£é”èº«è¾¹è½¦è¾† å³å¯ç”¨è½¦
    template(v-if="isShow('login')")
      +modal('æ¬¢è¿ä½¿ç”¨ä¼˜æ‹œå•è½¦', 'æˆ‘å‡†å¤‡å¥½äº†', 'login')
        img.avatar(:src="user.avatar")
        .user-name {{user.userName || 'çŒœä¸åˆ°'}}
        .ubike-cells
          .weui-cell.ubike-cell
            .weui-cell__hd
              .ubike-icon
                i.icon.icon-user
            .weui-cell__bd
              input.weui-input(type="number" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" v-model="user.phone")
          .weui-cell.ubike-cell
            .weui-cell__hd
              .ubike-icon
                i.icon.icon-check
            .weui-cell__bd
              input.weui-input(type="number" pattern="[0-9A-Za-z]*" placeholder="è¯·è¾“å…¥éªŒè¯ç " v-model="user.randCode")
            .weui-cell__ft
              button.weui-vcode-btn.ubike__btn_primary(:class="{'weui-btn_disabled':vcode.disabled}" @click="getCode")(:disabled="vcode.disabled") {{vcode.btnText}}

    template(v-if="isShow('realName')")
      +modal('å®åè®¤è¯', 'å¥½ çš„', 'verify')
        .ubike-cells
          .weui-cell.ubike-cell
            .weui-cell__hd
              .ubike-icon
                i.icon.icon-user
            .weui-cell__bd
              input.weui-input(placeholder="è¯·è¾“å…¥å§“å" v-model="user.realName")
          .weui-cell.ubike-cell
            .weui-cell__hd
              .ubike-icon
                i.icon.icon-check
            .weui-cell__bd
              input.weui-input(pattern="[0-9]*[A-Za-z]{1}" placeholder="è¯·è¾“å…¥èº«ä»½è¯å·" v-model="user.icCardNo")

    template(v-if="isShow('firstUseCar')")
      +modal('ä½ å¥½ï¼{{user.realName || "ä½ çš„åå­—"}}', 'è§£ é”', 'unlock')(class="modal-opacity")
        div è¿™æ˜¯æ‚¨ç¬¬ä¸€æ¬¡ä½¿ç”¨ä¼˜æ‹œå•è½¦
        div æˆ‘ä»¬é€äº†æ‚¨1å…ƒéª‘è¡ŒåŸºé‡‘
        div(style="margin-bottom:26px") å¹¶ä¸”æš‚æ—¶å…å»äº†æŠ¼é‡‘
        img.cloud.cloud-left(src="../img/cloud.png")
        img.cloud.cloud-top(src="../img/cloud.png")
        img.cloud.cloud-right(src="../img/cloud.png")
        .road
        .biker
          img(src="../img/biker.png")


    template(v-if="isShow('charge')")
      +modal('å¯ç”¨ä½™é¢', 'ç¡® å®š', 'chargeBalance', true)
        .money {{charge.balance || 0.00}}
        .ubike-cells
          .weui-cell.ubike-cell
            .weui-cell__bd
              input.weui-input(type="number" v-model="charge.amount" pattern="[1-9]*0*" placeholder="è¯·è¾“å…¥æ‚¨è¦å……å€¼çš„é‡‘é¢" style="text-align:center")
        .weui-flex(v-for="ms in charge.money")
          .weui-flex__item(v-for="m in ms")
            .number(:class="{choose:m == charge.amount}" @click="charge.amount=m") {{m}} å…ƒ

    template(v-if="isShow('depositPay')")
      +modal('ç¼´çº³æŠ¼é‡‘', false)
        .money Â¥ {{(deposit.money / 100).toFixed(2)}}
        .deposit-tip ï¼Šæ³¨ï¼šèŠéº»ä¿¡ç”¨è¯„åˆ†é«˜äº650åˆ†å¯å…é™¤æŠ¼é‡‘
        a.weui-btn.ubike__btn_primary.deposit-btn(href="https://ubike.cn/v1/static/downloadapp.html") æˆ‘è¦å…æŠ¼
        a.a-tip(@click="payDeposit") æˆ‘ä¸ç®¡ï¼Œæˆ‘å°±è¦ç¼´çº³æŠ¼é‡‘ğŸ™„ >>

    template(v-if="!scanBtn")
      .weui-mask(@click="scanBtn=true")
      .weui-dialog.number-dialog
        .ubike-dialog__bd
          .numbers
            input(type="tel" @input="inputNumber" v-model="bikeNum" id="bikeNumber" autofocus)
            .number-bg(v-for="n in 11") {{!!bikeNum[n] ? bikeNum[n] : ''}}
          .ubike-dialog-tip
            div è‹¥å› è¾“é”™è½¦è¾†ç¼–å·é€ æˆè½¦è¾†ä¸¢å¤±
            div æ‚¨å°†æ‰¿æ‹…é«˜è¾¾1000å…ƒçš„è´£ä»»èµ”å¿
        .weui-dialog__ft
          button.weui-btn.weui-btn_primary.ubike__btn_primary(:class="{'weui-btn_disabled':(bikeNum+'').length!=11}" @click="unlock")(:disabled="(bikeNum+'').length!=11") ç¡®å®š

    div(v-show="loading")
      .weui-mask_transparent
      .weui-toast
        .weui-loading.weui-icon_toast
        p.weui-toast__content åŠ è½½ä¸­


    template(v-if="isShow('downloadTip')")
      +modal('', 'ç«‹å³ä¸‹è½½App', 'goToDownload')(class="modal-opacity")
        div(style="color:#fff;margin-bottom:20px;margin-top:-10px") å•Šå“¦ ~ å®åœ¨æŠ±æ­‰ï¼Œè¿™è¾†è½¦åªæœ‰ç”¨â€œä¼˜æ‹œå•è½¦â€Appæ‰èƒ½å¼€å“¦~èµ¶å¿«å»ä¸‹è½½å§
        .road
        .biker
          img(src="../img/biker.png")


block js
  +js("/js/jweixin-1.0.0.js")
  +js("/js/home.js")

